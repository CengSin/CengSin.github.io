<!doctype html><html class="h-full w-full font-sans" lang=en-us><head>
<meta charset=utf-8>
<link rel="shortcut icon" href=http://example.org/favicon.ico type=image/x-icon>
<meta name=viewport content="width=device-width,initial-scale=1">
<title>不包含连续的1的整数 - CengSin PERSONAL BLOG</title>
<meta property="og:title" content="不包含连续的1的整数">
<meta property="og:description" content="不包含连续的1的整数  给定一个正整数 n，找出小于或等于 n 的非负整数中，其二进制表示不包含 连续的1 的个数。
 示例 1:
输入: 5
输出: 5
解释: 下面是带有相应二进制表示的非负整数<= 5：
0 : 0 1 : 1 2 : 10 3 : 11 4 : 100 5 : 101 其中，只有整数3违反规则（有两个连续的1），其他5个满足规则。
说明: 1 <= n <= 10^9
根据题目描述，我们可以拿到1～n每个数字的二进制，然后计算二进制不包含连续的1的整数的数量，返回即可。但是 题目中的n的取值范围为[1,10^9]，暴力肯定会超时。
我们要计算的是[0,n]范围内数字二进制不包含连续1的个数。
假设数字n的二进制位为：1001001，如何计算范围内数字二进制不包含连续1的个数？
首先我们假设数字开头为0，数字表示为0xxxxxx。0之后的二进制可以为1，可以为0。在这种情况下，我们唯一能够 确定的就是，开头的0那一位。xxxxxx中有多少个不包含连续1数字呢？我们先记下这个子问题。
其次我们假设数字开头为1，那么1之后的二进制位必须为0。重申一下，二进制中不包含连续1的数字。那么我们可以确定 开头的两位二进制10。那么数字可以表示为10xxxxx。xxxxx中有多少个不包含连续1的数字呢？
声明一个数组dp，下标i表示长度为i的二进制。dp[i]表示该二进制位不包含连续的1的数量。由于 数字的二进制的每一位不是0就是1，如果一个二进制的开头为0，那么它的的下一位就可以选择0，或者1。如果一个二 进制的开头为1，那么它的下一位只能是0，如果是1的话就不符合题目中要求的不包含连续的1。由此可以得出：
dp[i] = dp[i - 1] + dp[i - 2]
dp[i - 1] 表示 0开头的，长度为i-1的二进制中不包含连续1的数量 dp[i - 2] 表示 10开头的，长度为i-2的二进制中不包含连续1的数量">
<meta property="og:type" content="article">
<meta property="og:url" content="http://example.org/posts/non_negative_integers_without_consecutive_ones/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2021-09-12T15:39:42+08:00">
<meta property="article:modified_time" content="2021-09-12T15:39:42+08:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="不包含连续的1的整数">
<meta name=twitter:description content="不包含连续的1的整数  给定一个正整数 n，找出小于或等于 n 的非负整数中，其二进制表示不包含 连续的1 的个数。
 示例 1:
输入: 5
输出: 5
解释: 下面是带有相应二进制表示的非负整数<= 5：
0 : 0 1 : 1 2 : 10 3 : 11 4 : 100 5 : 101 其中，只有整数3违反规则（有两个连续的1），其他5个满足规则。
说明: 1 <= n <= 10^9
根据题目描述，我们可以拿到1～n每个数字的二进制，然后计算二进制不包含连续的1的整数的数量，返回即可。但是 题目中的n的取值范围为[1,10^9]，暴力肯定会超时。
我们要计算的是[0,n]范围内数字二进制不包含连续1的个数。
假设数字n的二进制位为：1001001，如何计算范围内数字二进制不包含连续1的个数？
首先我们假设数字开头为0，数字表示为0xxxxxx。0之后的二进制可以为1，可以为0。在这种情况下，我们唯一能够 确定的就是，开头的0那一位。xxxxxx中有多少个不包含连续1数字呢？我们先记下这个子问题。
其次我们假设数字开头为1，那么1之后的二进制位必须为0。重申一下，二进制中不包含连续1的数字。那么我们可以确定 开头的两位二进制10。那么数字可以表示为10xxxxx。xxxxx中有多少个不包含连续1的数字呢？
声明一个数组dp，下标i表示长度为i的二进制。dp[i]表示该二进制位不包含连续的1的数量。由于 数字的二进制的每一位不是0就是1，如果一个二进制的开头为0，那么它的的下一位就可以选择0，或者1。如果一个二 进制的开头为1，那么它的下一位只能是0，如果是1的话就不符合题目中要求的不包含连续的1。由此可以得出：
dp[i] = dp[i - 1] + dp[i - 2]
dp[i - 1] 表示 0开头的，长度为i-1的二进制中不包含连续1的数量 dp[i - 2] 表示 10开头的，长度为i-2的二进制中不包含连续1的数量">
<link rel=stylesheet href="/css/styles.min.ad68f0a78b616fe22787e9ca587ae2ca7feee276768a8734e07b00f82d05b406717ad6f21da4b0d8b492f85c12b0ebba60220f8280067957da323c6a739a815f.css" integrity="sha512-rWjwp4thb+Inh+nKWHriyn/u4nZ2ioc04HsA+C0FtAZxetbyHaSw2LSS+FwSsOu6YCIPgoAGeVfaMjxqc5qBXw==">
<script>localStorage.theme==='dark'||!('theme'in localStorage)&&window.matchMedia('(prefers-color-scheme: dark)').matches?document.documentElement.classList.add('dark'):document.documentElement.classList.remove('dark')</script>
</head><body class="flex flex-col items-center w-full">
<main class="w-full sm:w-10/12 md:w-9/12 lg:w-7/12 xl:w-5/12 m-auto px-6"><header class="mt-9 mb-8">
<div class="flex justify-between items-center">
<div class="flex items-center">
<input id=navbar_btn class=hidden type=checkbox>
<label for=navbar_btn class="menu-btn mr-4 items-center flex xl:hidden">
<span class=navicon></span>
</label>
<a href=/ class="font-bold text-lg xl:text-2xl mr-auto">CengSin PERSONAL BLOG</a>
</div>
<div class="flex items-center">
<div class="cursor-pointer ml-2">
<svg id="dark_mode_btn" class="hidden" width="18" height="18" viewBox="0 0 24 24"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M20 15.31 23.31 12 20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69zM12 18c-3.31.0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6z"/></svg></svg>
<svg id="light_mode_btn" class="hidden" width="18" height="18" viewBox="0 0 24 24"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><g><path d="M0 0h24v24H0V0z" fill="none"/></g><g><g><g><path d="M14 2c1.82.0 3.53.5 5 1.35C16.01 5.08 14 8.3 14 12s2.01 6.92 5 8.65C17.53 21.5 15.82 22 14 22 8.48 22 4 17.52 4 12S8.48 2 14 2z"/></g></g></g></svg></svg>
</div>
</div>
</div>
<nav id=navbar class="mt-3 hidden xl:block"><ul class=flex></ul>
</nav>
<nav id=navbar_sm class="mt-2 hidden">
<ul>
</ul>
<hr class=my-4>
</nav>
</header>
<div id=content class=my-8>
<div class="toc-wrapper my-8 p-4 border-2 rounded leading-6">
<span class=font-bold>Table of contents</span>
<nav id=TableOfContents>
<ul>
<li>
<ul>
<li></li>
</ul>
</li>
</ul>
</nav>
</div>
<div class=my-7>
<article>
<h1 id=不包含连续的1的整数>不包含连续的1的整数</h1>
<blockquote>
<p>给定一个正整数 n，找出小于或等于 n 的非负整数中，其二进制表示不包含 连续的1 的个数。</p>
</blockquote>
<p>示例 1:</p>
<p>输入: 5</p>
<p>输出: 5</p>
<p>解释:
下面是带有相应二进制表示的非负整数&lt;= 5：</p>
<pre tabindex=0><code>0 : 0
1 : 1
2 : 10
3 : 11
4 : 100
5 : 101
</code></pre><p>其中，只有整数3违反规则（有两个连续的1），其他5个满足规则。</p>
<p>说明: 1 &lt;= n &lt;= 10^9</p>
<p>根据题目描述，我们可以拿到1～n每个数字的二进制，然后计算二进制不包含连续的1的整数的数量，返回即可。但是
题目中的n的取值范围为[1,10^9]，暴力肯定会超时。</p>
<p>我们要计算的是[0,n]范围内数字二进制不包含连续1的个数。</p>
<p>假设数字n的二进制位为：1001001，如何计算范围内数字二进制不包含连续1的个数？</p>
<p>首先我们假设数字开头为0，数字表示为0xxxxxx。0之后的二进制可以为1，可以为0。在这种情况下，我们唯一能够
确定的就是，开头的0那一位。xxxxxx中有多少个不包含连续1数字呢？我们先记下这个子问题。</p>
<p>其次我们假设数字开头为1，那么1之后的二进制位必须为0。重申一下，二进制中不包含连续1的数字。那么我们可以确定
开头的两位二进制10。那么数字可以表示为10xxxxx。xxxxx中有多少个不包含连续1的数字呢？</p>
<p>声明一个数组dp，下标i表示长度为i的二进制。<strong>dp[i]表示该二进制位不包含连续的1的数量</strong>。由于
数字的二进制的每一位不是0就是1，如果一个二进制的开头为0，那么它的的下一位就可以选择0，或者1。如果一个二
进制的开头为1，那么它的下一位只能是0，如果是1的话就不符合题目中要求的不包含连续的1。由此可以得出：</p>
<p>dp[i] = dp[i - 1] + dp[i - 2]</p>
<p>dp[i - 1] 表示 0开头的，长度为i-1的二进制中不包含连续1的数量
dp[i - 2] 表示 10开头的，长度为i-2的二进制中不包含连续1的数量</p>
<p>终止条件为：</p>
<p>dp[0] = 1
dp[1] = 2</p>
<p>例如：1001001</p>
<p>首先要考虑： 0000000～01111111 中不包含连续1的数字的数量</p>
<p>然后就是：1000000～1001001 中不包含连续1的数字的数量 ( ？)</p>
<p>怎么求1000000～1001001 中不包含连续1的数字的数量 ( ？)呢，我们可以计算</p>
<p>1000000~10000111和1001000到1001001的数量。</p>
<p>考虑一下边界条件：
1001101，这种情况下，我们需要对每个为1的二进制位记录他的前一位二进制，如果两者都为1，那么返回false。否则返回true。</p>
<h4 id=代码>代码</h4>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>findIntegers</span>(<span style=color:#a6e22e>n</span> <span style=color:#66d9ef>int</span>) (<span style=color:#a6e22e>ans</span> <span style=color:#66d9ef>int</span>) {
	<span style=color:#a6e22e>k</span>, <span style=color:#a6e22e>dp</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>32</span>, [<span style=color:#ae81ff>32</span>]<span style=color:#66d9ef>int</span>{<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>} <span style=color:#75715e>// k = 32是要从2^32（最大）开始计算
</span><span style=color:#75715e></span>	<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>2</span>; <span style=color:#a6e22e>i</span> &lt; <span style=color:#a6e22e>k</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span> {
		<span style=color:#a6e22e>dp</span>[<span style=color:#a6e22e>i</span>] = <span style=color:#a6e22e>dp</span>[<span style=color:#a6e22e>i</span><span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>] <span style=color:#f92672>+</span> <span style=color:#a6e22e>dp</span>[<span style=color:#a6e22e>i</span><span style=color:#f92672>-</span><span style=color:#ae81ff>2</span>]
	}

	<span style=color:#a6e22e>k</span> = <span style=color:#ae81ff>31</span>
	<span style=color:#a6e22e>pre</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>0</span>
	<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>k</span> <span style=color:#f92672>&gt;=</span> <span style=color:#ae81ff>0</span> {
		<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>n</span><span style=color:#f92672>&amp;</span>(<span style=color:#ae81ff>1</span><span style=color:#f92672>&lt;&lt;</span><span style=color:#a6e22e>k</span>) <span style=color:#f92672>!=</span> <span style=color:#ae81ff>0</span> {
			<span style=color:#a6e22e>ans</span> <span style=color:#f92672>+=</span> <span style=color:#a6e22e>dp</span>[<span style=color:#a6e22e>k</span>]
			<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>pre</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>1</span> {
				<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>ans</span>
			}
			<span style=color:#a6e22e>pre</span> = <span style=color:#ae81ff>1</span>
		} <span style=color:#66d9ef>else</span> {
			<span style=color:#a6e22e>pre</span> = <span style=color:#ae81ff>0</span>
		}
		<span style=color:#a6e22e>k</span> <span style=color:#f92672>-=</span> <span style=color:#ae81ff>1</span>
	}

	<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>ans</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>
}
</code></pre></div>
</article>
</div>
</div>
</main>
<script src=/js/header.0b11855b871cb4d10c6c07b6723b9209f5c2bc9100735ab6ff47c8f9b76bb3d6ae41b488083b5fb15697987334039eb651b25c83228c29ac48a2bc168db8a894.js integrity="sha512-CxGFW4cctNEMbAe2cjuSCfXCvJEAc1q2/0fI+bdrs9auQbSICDtfsVaXmHM0A562UbJcgyKMKaxIorwWjbiolA=="></script>
<script src=/js/zooming.10cfe42f65295a0596af3315b671956309ed1d20e299e476ca16f6f6b902421e29c6f81a8f9a7ce816f84bef0791dbad2e61e68ff8fe798bd9ce9e093756d084.js integrity="sha512-EM/kL2UpWgWWrzMVtnGVYwntHSDimeR2yhb29rkCQh4pxvgaj5p86Bb4S+8HkdutLmHmj/j+eYvZzp4JN1bQhA=="></script>
<script src=/js/code-copy-btn.78c2b9fa7e7343f48dedd4c678f6aa49b144aa7b7e28e43d5bf5d8604134f4b2353ca3be02e66b7ace7d6ddd780de243dd71f9073446df964728e38c386e484f.js integrity="sha512-eMK5+n5zQ/SN7dTGePaqSbFEqnt+KOQ9W/XYYEE09LI1PKO+AuZres59bd14DeJD3XH5BzRG35ZHKOOMOG5ITw=="></script>
</body>
</html>